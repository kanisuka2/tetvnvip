<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√∫c M·ª´ng NƒÉm M·ªõi  - An Khang Th·ªãnh V∆∞·ª£ng</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            overflow: hidden;
            background: linear-gradient(135deg, #8b0000 0%, #bc002d 100%);
            color: white;
            position: relative;
            min-height: 100vh;
        }

        /* H√¨nh n·ªÅn v·ªõi hi·ªáu ·ª©ng ph√°o hoa */
        .tet-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.3) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(255, 0, 0, 0.3) 0%, transparent 25%),
                radial-gradient(circle at 40% 80%, rgba(255, 105, 180, 0.3) 0%, transparent 25%),
                linear-gradient(135deg, #8b0000 0%, #bc002d 100%);
            z-index: 1;
        }

        /* Canvas ph√°o hoa n·ªÅn */
        #backgroundFireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        /* Container ch√≠nh */
        .container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 20px 0 40px 0;
        }

        .title {
            background: linear-gradient(to right, #ffd700, #ff9500, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 40px rgba(255, 215, 0, 0.7);
            animation: glow 2s infinite alternate;
        }

        .title h1 {
            font-size: 4rem;
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .title p {
            font-size: 2.5rem;
            font-weight: bold;
            letter-spacing: 1px;
        }

        @keyframes glow {
            0% { text-shadow: 0 0 20px rgba(255, 215, 0, 0.7); }
            100% { text-shadow: 0 0 40px rgba(255, 215, 0, 1), 0 0 60px rgba(255, 215, 0, 0.7); }
        }

        /* N·ªôi dung ch√≠nh - b·ªë c·ª•c 3 c·ªôt */
        .main-content {
            display: flex;
            flex: 1;
            gap: 30px;
            height: 70vh;
        }

        /* C·ªôt b√™n tr√°i - C√¢y ƒë√†o ƒë·∫πp */
        .left-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            position: relative;
        }

        /* C·ªôt gi·ªØa - 54 th·∫ª b√†i */
        .center-column {
            flex: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        /* C·ªôt b√™n ph·∫£i - Khung hi·ªÉn th·ªã ti·ªÅn l·ªõn */
        .right-column {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }

        /* Khung hi·ªÉn th·ªã ti·ªÅn l·ªõn b√™n ph·∫£i - ƒê√É S·ª¨A: Ch·ªâ hi·ªÉn th·ªã s·ªë ti·ªÅn */
        .money-display-container {
            width: 100%;
            height: 70%;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.9), rgba(255, 165, 0, 0.9));
            border-radius: 25px;
            border: 6px solid #bc002d;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.4),
                inset 0 0 40px rgba(255, 255, 255, 0.3);
            padding: 30px;
            position: relative;
            overflow: hidden;
            animation: pulse-border 3s infinite alternate;
        }

        @keyframes pulse-border {
            0% { border-color: #bc002d; box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), inset 0 0 40px rgba(255, 255, 255, 0.3); }
            100% { border-color: #ffd700; box-shadow: 0 15px 50px rgba(255, 215, 0, 0.5), inset 0 0 50px rgba(255, 255, 255, 0.4); }
        }

        /* S·ªë ti·ªÅn l·ªõn - ƒê√É S·ª¨A: Hi·ªÉn th·ªã s·ªë ti·ªÅn duy nh·∫•t */
        .big-money-amount {
            font-size: 7rem;
            font-weight: 900;
            color: #bc002d;
            text-align: center;
            text-shadow: 
                4px 4px 8px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(255, 215, 0, 0.9);
            padding: 40px 60px;
            border-radius: 20px;
            border: 8px solid #bc002d;
            background: rgba(255, 255, 255, 0.95);
            min-width: 80%;
            animation: money-glow 2s infinite alternate;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        @keyframes money-glow {
            0% { transform: scale(1); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
            100% { transform: scale(1.05); box-shadow: 0 15px 50px rgba(255, 215, 0, 0.7); }
        }

        /* Hi·ªáu ·ª©ng th·ªèi v√†ng */
        .gold-bar-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 10rem;
            opacity: 0;
            z-index: 20;
            filter: drop-shadow(0 0 30px rgba(255, 215, 0, 1));
            pointer-events: none;
        }

        .gold-bar-animation {
            animation: goldBarPop 1.5s ease-out forwards;
        }

        @keyframes goldBarPop {
            0% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.3) rotate(0deg); 
            }
            20% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1.3) rotate(10deg); 
            }
            40% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1.1) rotate(-5deg); 
            }
            60% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1.2) rotate(5deg); 
            }
            80% { 
                opacity: 0.8; 
                transform: translate(-50%, -50%) scale(1.1) rotate(0deg); 
            }
            100% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.9) rotate(0deg); 
            }
        }

        /* Cards container */
        .cards-container {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            grid-template-rows: repeat(6, 1fr);
            gap: 12px;
            width: 100%;
            height: 100%;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            backdrop-filter: blur(15px);
            border: 3px solid rgba(255, 215, 0, 0.4);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        /* Th·∫ª b√†i - ƒê√É S·ª¨A: Ch·ªâ hi·ªÉn th·ªã s·ªë th·ª© t·ª±, kh√¥ng c√≥ bi·ªÉu t∆∞·ª£ng ng·ª±a */
        .card {
            width: 100%;
            height: 100%;
            perspective: 1000px;
            cursor: pointer;
            position: relative;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            border-radius: 12px;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 8px;
            overflow: hidden;
            box-sizing: border-box;
        }

        .card-front {
            background: linear-gradient(135deg, #bc002d, #8b0000);
            border: 3px solid #ffd700;
            box-shadow: 
                inset 0 0 20px rgba(0, 0, 0, 0.2),
                0 8px 20px rgba(0, 0, 0, 0.4);
            position: relative;
        }

        /* S·ªë th·ª© t·ª± tr√™n th·∫ª - ƒê√É S·ª¨A: L√†m to v√† ƒë·∫πp h∆°n */
        .card-number {
            font-size: 2.5rem;
            font-weight: 900;
            color: #ffd700;
            text-shadow: 
                3px 3px 6px rgba(0, 0, 0, 0.7),
                0 0 20px rgba(255, 215, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 3px solid rgba(255, 215, 0, 0.5);
        }

        .card-back {
            background: linear-gradient(135deg, #ffd700, #ff9500);
            transform: rotateY(180deg);
            color: #bc002d;
            font-weight: 900;
            box-shadow: inset 0 0 30px rgba(255, 255, 255, 0.3);
        }

        /* S·ªë ti·ªÅn tr√™n th·∫ª */
        .money-amount {
            font-size: 1.6rem;
            font-weight: 900;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            border: 2px solid #bc002d;
            line-height: 1.1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            text-align: center;
            box-sizing: border-box;
            max-height: 90%;
            word-break: break-word;
        }

        /* Container c√¢y */
        .tree-container {
            width: 100%;
            height: 120%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin-bottom: -20%;
            transform: scale(1.2);
            transform-origin: bottom center;
        }

        /* SVG Tree Styling */
        .tree-svg {
            width: 120%;
            height: 120%;
            filter: drop-shadow(0 15px 25px rgba(0, 0, 0, 0.4));
            animation: swayTree 8s ease-in-out infinite;
            transform-origin: bottom center;
        }

        @keyframes swayTree {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(1deg); }
            75% { transform: rotate(-1deg); }
        }

        /* L√¨ x√¨ treo tr√™n c√¢y */
        .tree-envelope {
            position: absolute;
            width: 60px;
            height: 85px;
            background: linear-gradient(135deg, #bc002d, #8b0000);
            border: 3px solid #ffd700;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #ffd700;
            font-weight: bold;
            font-size: 1.8rem;
            z-index: 100;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
            animation: swingEnvelope 4s ease-in-out infinite;
            cursor: pointer;
        }

        @keyframes swingEnvelope {
            0%, 100% { transform: rotate(-8deg); }
            50% { transform: rotate(8deg); }
        }

        /* V·∫≠t ph·∫©m r∆°i d√†y ƒë·∫∑c - ƒê√É S·ª¨A: Th√™m nhi·ªÅu lo·∫°i v·∫≠t ph·∫©m */
        .falling-item {
            position: absolute;
            z-index: 5;
            animation: fallItem linear infinite;
            pointer-events: none;
            font-size: 1.8rem;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));
        }

        @keyframes fallItem {
            0% {
                transform: translateY(-100px) translateX(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(800px) translateX(50px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Th√¥ng tin ·ªü d∆∞·ªõi */
        .info {
            text-align: center;
            padding: 25px;
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            border: 3px solid rgba(255, 215, 0, 0.5);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-top: 15px;
        }

        .stat-item {
            font-size: 1.5rem;
            color: #ffd700;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .stat-item i {
            font-size: 2rem;
        }

        /* N√∫t √¢m nh·∫°c nh·ªè */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .music-btn {
            background: rgba(255, 215, 0, 0.9);
            color: #bc002d;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }

        .music-btn:hover {
            transform: scale(1.1);
            background: rgba(255, 215, 0, 1);
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .cards-container {
                grid-template-columns: repeat(7, 1fr);
                grid-template-rows: repeat(8, 1fr);
                gap: 10px;
            }
            
            .big-money-amount {
                font-size: 5rem;
                padding: 30px 40px;
            }
        }

        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
                height: auto;
                gap: 40px;
            }
            
            .cards-container {
                grid-template-columns: repeat(9, 1fr);
                grid-template-rows: repeat(6, 1fr);
                height: 60vh;
            }
            
            .right-column {
                height: 40vh;
                order: 3;
            }
            
            .money-display-container {
                height: 90%;
            }
            
            .title h1 {
                font-size: 3rem;
            }
            
            .title p {
                font-size: 2rem;
            }
            
            .big-money-amount {
                font-size: 4.5rem;
            }
            
            .card-number {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: repeat(6, 1fr);
                grid-template-rows: repeat(9, 1fr);
            }
            
            .title h1 {
                font-size: 2.5rem;
            }
            
            .title p {
                font-size: 1.8rem;
            }
            
            .stats {
                flex-direction: column;
                gap: 20px;
            }
            
            .big-money-amount {
                font-size: 3.5rem;
                padding: 20px 30px;
            }
            
            .card-number {
                font-size: 1.8rem;
            }
            
            .gold-bar-effect {
                font-size: 7rem;
            }
        }
    </style>
</head>
<body>
    <!-- H√¨nh n·ªÅn T·∫øt -->
    <div class="tet-background"></div>
    
    <!-- Canvas ph√°o hoa n·ªÅn -->
    <canvas id="backgroundFireworks"></canvas>
    
    <!-- Hi·ªáu ·ª©ng th·ªèi v√†ng -->
    <div class="gold-bar-effect" id="goldBarEffect">ü•á</div>
    
    <!-- N√∫t ƒëi·ªÅu khi·ªÉn √¢m nh·∫°c -->
    <div class="music-control">
        <button id="musicToggle" class="music-btn">
            <i class="fas fa-volume-up"></i>
        </button>
    </div>
    
    <!-- Audio cho nh·∫°c T·∫øt -->
    <audio id="tetMusic" loop>
        <source src="tet-music.mp3" type="audio/mpeg">
        <source src="https://assets.mixkit.co/music/preview/mixkit-happy-new-year-2019-479.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Container ch√≠nh -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="title">
                <h1>üéâ CH√öC M·ª™NG NƒÇM M·ªöI 2026 üéâ</h1>
                <p>An Khang - Th·ªãnh V∆∞·ª£ng</p>
            </div>
        </div>
        
        <!-- N·ªôi dung ch√≠nh -->
        <div class="main-content">
            <!-- C·ªôt b√™n tr√°i - C√¢y ƒë√†o -->
            <div class="left-column">
                <div class="tree-container">
                    <div class="tree" id="peachTree">
                        <!-- C√¢y ƒë√†o SVG s·∫Ω ƒë∆∞·ª£c ch√®n b·∫±ng JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- C·ªôt gi·ªØa - 54 th·∫ª b√†i -->
            <div class="center-column">
                <div class="cards-container" id="cardsContainer">
                    <!-- 54 th·∫ª b√†i s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                </div>
            </div>
            
            <!-- C·ªôt b√™n ph·∫£i - Khung hi·ªÉn th·ªã ti·ªÅn l·ªõn -->
            <div class="right-column">
                <div class="money-display-container">
                    <div class="big-money-amount" id="bigMoneyAmount">0</div>
                </div>
            </div>
        </div>
        
        <!-- Th√¥ng tin -->
        <div class="info">
            <div class="stats">
                <div class="stat-item">
                    <i class="fas fa-gift"></i> 
                    <span>L√¨ x√¨ ƒë√£ m·ªü: <span id="openedCount">0</span>/54</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-money-bill-wave"></i> 
                    <span>T·ªïng ti·ªÅn: <span id="totalMoney">0</span> VND</span>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // L·ªõp ch√≠nh ƒëi·ªÅu khi·ªÉn ·ª©ng d·ª•ng
        class Tet2026App {
            constructor() {
                this.cards = [];
                this.totalMoney = 0;
                this.openedCount = 0;
                this.cardValues = this.generateCardValues(); // 54 th·∫ª theo c∆° c·∫•u m·ªõi
                this.isAnimating = false;
                this.fallingItemsCount = 0;
                this.fireworks = [];
                this.fallingItems = [];
                
                // C√°c lo·∫°i v·∫≠t ph·∫©m r∆°i - ƒê√É S·ª¨A: Th√™m nhi·ªÅu lo·∫°i
                this.fallingItemTypes = ['üßß', 'üí∞', 'ü™ô', '‚≠ê', 'üéÅ', '‚ú®', 'üåü', 'üíé', 'üèÆ', 'üéâ'];
                
                // DOM Elements
                this.cardsContainer = document.getElementById('cardsContainer');
                this.openedCountDisplay = document.getElementById('openedCount');
                this.totalMoneyDisplay = document.getElementById('totalMoney');
                this.bigMoneyAmount = document.getElementById('bigMoneyAmount');
                this.goldBarEffect = document.getElementById('goldBarEffect');
                this.musicToggle = document.getElementById('musicToggle');
                this.tetMusic = document.getElementById('tetMusic');
                this.peachTree = document.getElementById('peachTree');
                this.canvas = document.getElementById('backgroundFireworks');
                this.ctx = this.canvas.getContext('2d');
                
                // Kh·ªüi t·∫°o
                this.init();
            }
            
            // T·∫°o gi√° tr·ªã cho 54 th·∫ª b√†i theo c∆° c·∫•u m·ªõi
            generateCardValues() {
                const values = [];
                
                // 6 x 5,000ƒë
                for (let i = 0; i < 6; i++) values.push(5000);
                
                // 22 x 10,000ƒë
                for (let i = 0; i < 22; i++) values.push(10000);
                
                // 20 x 20,000ƒë
                for (let i = 0; i < 20; i++) values.push(20000);
                
                // 5 x 50,000ƒë
                for (let i = 0; i < 5; i++) values.push(50000);
                
                // 1 x 100,000ƒë
                values.push(100000);
                
                // X√°o tr·ªôn c√°c gi√° tr·ªã
                return this.shuffleArray(values);
            }
            
            // H√†m x√°o tr·ªôn m·∫£ng
            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            init() {
                // Thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc canvas
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
                
                this.createCards();
                this.createPeachTree();
                this.startIntensiveFallingItems(); // ƒê√É S·ª¨A: V·∫≠t ph·∫©m r∆°i d√†y ƒë·∫∑c
                this.startIntensiveFireworks(); // ƒê√É S·ª¨A: Ph√°o hoa d√†y ƒë·∫∑c
                this.setupMusic();
                
                // B·∫Øt ƒë·∫ßu v√≤ng l·∫∑p animation
                this.animate();
            }
            
            resizeCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            // T·∫°o 54 th·∫ª b√†i c√≥ s·ªë th·ª© t·ª± - ƒê√É S·ª¨A: Ch·ªâ hi·ªÉn th·ªã s·ªë th·ª© t·ª±
            createCards() {
                this.cardsContainer.innerHTML = '';
                
                for (let i = 0; i < 54; i++) {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.index = i;
                    card.dataset.value = this.cardValues[i];
                    
                    // T·∫°o s·ªë ti·ªÅn hi·ªÉn th·ªã g·ªçn g√†ng
                    const moneyText = this.formatMoney(this.cardValues[i]);
                    
                    card.innerHTML = `
                        <div class="card-inner">
                            <div class="card-front">
                                <div class="card-number">${i + 1}</div>
                            </div>
                            <div class="card-back">
                                <div class="money-amount">${moneyText} VND</div>
                            </div>
                        </div>
                    `;
                    
                    // S·ª± ki·ªán click
                    card.addEventListener('click', () => {
                        if (!card.classList.contains('flipped') && !this.isAnimating) {
                            this.flipCard(card, i);
                        }
                    });
                    
                    this.cardsContainer.appendChild(card);
                    this.cards.push(card);
                }
            }
            
            // L·∫≠t th·∫ª b√†i v·ªõi hi·ªáu ·ª©ng th·ªèi v√†ng
            flipCard(card, index) {
                this.isAnimating = true;
                
                // L·∫≠t th·∫ª
                card.classList.add('flipped');
                
                // C·∫≠p nh·∫≠t th√¥ng tin
                const value = parseInt(card.dataset.value);
                
                // Hi·ªáu ·ª©ng th·ªèi v√†ng
                this.showGoldBarEffect();
                
                setTimeout(() => {
                    this.totalMoney += value;
                    this.openedCount++;
                    
                    // C·∫≠p nh·∫≠t s·ªë ti·ªÅn l·ªõn b√™n ph·∫£i - ƒê√É S·ª¨A: Ch·ªâ hi·ªÉn th·ªã s·ªë ti·ªÅn
                    this.updateBigMoneyDisplay(value);
                    
                    this.totalMoneyDisplay.textContent = this.formatMoneySimple(this.totalMoney);
                    this.openedCountDisplay.textContent = this.openedCount;
                    
                    // Ph√°o hoa d√†y ƒë·∫∑c
                    this.createMultipleFireworks(5);
                    
                    // Th√™m v·∫≠t ph·∫©m r∆°i d√†y ƒë·∫∑c
                    this.createIntensiveFallingItems(10);
                    
                    // Ki·ªÉm tra k·∫øt th√∫c
                    if (this.openedCount >= 54) {
                        setTimeout(() => this.showFinalCelebration(), 1500);
                    }
                    
                    this.isAnimating = false;
                }, 800);
            }
            
            // Hi·ªÉn th·ªã hi·ªáu ·ª©ng th·ªèi v√†ng
            showGoldBarEffect() {
                this.goldBarEffect.classList.remove('gold-bar-animation');
                void this.goldBarEffect.offsetWidth; // Trigger reflow
                this.goldBarEffect.classList.add('gold-bar-animation');
            }
            
            // C·∫≠p nh·∫≠t s·ªë ti·ªÅn l·ªõn b√™n ph·∫£i - ƒê√É S·ª¨A: Ch·ªâ hi·ªÉn th·ªã s·ªë ti·ªÅn
            updateBigMoneyDisplay(value) {
                const formattedValue = this.formatMoneySimple(value);
                this.bigMoneyAmount.textContent = `${formattedValue}`;
                
                // Hi·ªáu ·ª©ng nh·∫•p nh√°y
                this.bigMoneyAmount.style.animation = 'none';
                void this.bigMoneyAmount.offsetWidth; // Trigger reflow
                this.bigMoneyAmount.style.animation = 'money-glow 2s infinite alternate';
            }
            
            // T·∫°o c√¢y ƒë√†o SVG ƒë·∫πp
            createPeachTree() {
                const svgNS = "http://www.w3.org/2000/svg";
                const svg = document.createElementNS(svgNS, "svg");
                svg.setAttribute("width", "100%");
                svg.setAttribute("height", "100%");
                svg.setAttribute("viewBox", "0 0 500 700");
                svg.classList.add("tree-svg");
                
                // Th√¢n c√¢y ch√≠nh
                const trunk = document.createElementNS(svgNS, "path");
                trunk.setAttribute("d", "M250,650 C250,580 220,500 250,450 C280,400 220,350 250,300 C280,250 220,150 250,100");
                trunk.setAttribute("fill", "#8B4513");
                trunk.setAttribute("stroke", "#654321");
                trunk.setAttribute("stroke-width", "4");
                svg.appendChild(trunk);
                
                // C√†nh l·ªõn b√™n tr√°i
                const leftBranch1 = document.createElementNS(svgNS, "path");
                leftBranch1.setAttribute("d", "M250,450 Q180,400 140,350");
                leftBranch1.setAttribute("fill", "none");
                leftBranch1.setAttribute("stroke", "#8B4513");
                leftBranch1.setAttribute("stroke-width", "20");
                leftBranch1.setAttribute("stroke-linecap", "round");
                svg.appendChild(leftBranch1);
                
                const leftBranch2 = document.createElementNS(svgNS, "path");
                leftBranch2.setAttribute("d", "M250,350 Q200,300 170,250");
                leftBranch2.setAttribute("fill", "none");
                leftBranch2.setAttribute("stroke", "#8B4513");
                leftBranch2.setAttribute("stroke-width", "15");
                leftBranch2.setAttribute("stroke-linecap", "round");
                svg.appendChild(leftBranch2);
                
                // C√†nh l·ªõn b√™n ph·∫£i
                const rightBranch1 = document.createElementNS(svgNS, "path");
                rightBranch1.setAttribute("d", "M250,450 Q320,400 360,350");
                rightBranch1.setAttribute("fill", "none");
                rightBranch1.setAttribute("stroke", "#8B4513");
                rightBranch1.setAttribute("stroke-width", "20");
                rightBranch1.setAttribute("stroke-linecap", "round");
                svg.appendChild(rightBranch1);
                
                const rightBranch2 = document.createElementNS(svgNS, "path");
                rightBranch2.setAttribute("d", "M250,350 Q300,300 330,250");
                rightBranch2.setAttribute("fill", "none");
                rightBranch2.setAttribute("stroke", "#8B4513");
                rightBranch2.setAttribute("stroke-width", "15");
                rightBranch2.setAttribute("stroke-linecap", "round");
                svg.appendChild(rightBranch2);
                
                // T·∫°o nhi·ªÅu hoa ƒë√†o (m√†u h·ªìng)
                const peachBlossomColors = ['#FFB6C1', '#FF69B4', '#FF1493', '#DB7093'];
                for (let i = 0; i < 60; i++) {
                    const x = 100 + Math.random() * 300;
                    const y = 150 + Math.random() * 400;
                    
                    const blossomGroup = document.createElementNS(svgNS, "g");
                    blossomGroup.setAttribute("transform", `translate(${x}, ${y})`);
                    
                    // C√°nh hoa (5 c√°nh)
                    for (let j = 0; j < 5; j++) {
                        const angle = (j * 72) * Math.PI / 180;
                        const petal = document.createElementNS(svgNS, "ellipse");
                        petal.setAttribute("rx", "8");
                        petal.setAttribute("ry", "12");
                        petal.setAttribute("transform", `rotate(${j * 72})`);
                        petal.setAttribute("fill", peachBlossomColors[Math.floor(Math.random() * peachBlossomColors.length)]);
                        petal.setAttribute("opacity", "0.9");
                        blossomGroup.appendChild(petal);
                    }
                    
                    // Nh·ª•y hoa
                    const center = document.createElementNS(svgNS, "circle");
                    center.setAttribute("r", "5");
                    center.setAttribute("fill", "#FFD700");
                    blossomGroup.appendChild(center);
                    
                    svg.appendChild(blossomGroup);
                }
                
                this.peachTree.innerHTML = '';
                this.peachTree.appendChild(svg);
                
                // Th√™m l√¨ x√¨ treo tr√™n c√¢y
                this.createTreeEnvelopes();
            }
            
            // T·∫°o l√¨ x√¨ treo tr√™n c√¢y
            createTreeEnvelopes() {
                const texts = ['PH√öC', 'L·ªòC', 'TH·ªå'];
                
                // L√¨ x√¨ tr√™n c√¢y ƒë√†o
                for (let i = 0; i < 8; i++) {
                    const envelope = document.createElement('div');
                    envelope.className = 'tree-envelope';
                    envelope.textContent = texts[Math.floor(Math.random() * texts.length)];
                    
                    // ƒê·∫∑t v·ªã tr√≠ ng·∫´u nhi√™n tr√™n c√¢y
                    envelope.style.left = `${15 + Math.random() * 70}%`;
                    envelope.style.top = `${20 + Math.random() * 60}%`;
                    envelope.style.animationDelay = `${Math.random() * 4}s`;
                    
                    this.peachTree.appendChild(envelope);
                }
            }
            
            // V·∫≠t ph·∫©m r∆°i d√†y ƒë·∫∑c t·ª´ kh·∫Øp m√†n h√¨nh - ƒê√É S·ª¨A: Th√™m nhi·ªÅu v·∫≠t ph·∫©m
            startIntensiveFallingItems() {
                // T·∫°o v·∫≠t ph·∫©m r∆°i li√™n t·ª•c
                setInterval(() => {
                    // T·∫°o t·ª´ 3-5 v·∫≠t ph·∫©m m·ªói l·∫ßn
                    const count = 3 + Math.floor(Math.random() * 3);
                    for (let i = 0; i < count; i++) {
                        this.createFallingItem();
                    }
                }, 200); // TƒÉng t·∫ßn su·∫•t l√™n
            }
            
            // T·∫°o v·∫≠t ph·∫©m r∆°i t·ª´ kh·∫Øp m√†n h√¨nh
            createFallingItem() {
                const item = document.createElement('div');
                item.className = 'falling-item';
                item.textContent = this.fallingItemTypes[Math.floor(Math.random() * this.fallingItemTypes.length)];
                
                // ƒê·∫∑t v·ªã tr√≠ ng·∫´u nhi√™n t·ª´ tr√™n c√πng
                const left = Math.random() * window.innerWidth;
                
                // K√≠ch th∆∞·ªõc ng·∫´u nhi√™n
                const size = 1.5 + Math.random() * 2.5;
                
                // T·ªëc ƒë·ªô r∆°i ng·∫´u nhi√™n
                const duration = 3 + Math.random() * 4;
                
                // Di chuy·ªÉn ngang ng·∫´u nhi√™n
                const xMove = (Math.random() - 0.5) * 100;
                
                item.style.left = `${left}px`;
                item.style.top = `-50px`;
                item.style.fontSize = `${size}rem`;
                item.style.animationDuration = `${duration}s`;
                item.style.animationName = 'fallItem';
                item.style.animationTimingFunction = 'linear';
                item.style.animationIterationCount = '1';
                
                document.body.appendChild(item);
                
                // X√≥a sau khi r∆°i xong
                setTimeout(() => {
                    if (item.parentNode) {
                        item.remove();
                    }
                }, duration * 1000 + 100);
            }
            
            // T·∫°o v·∫≠t ph·∫©m r∆°i d√†y ƒë·∫∑c khi l·∫≠t th·∫ª
            createIntensiveFallingItems(count) {
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        this.createFallingItem();
                    }, i * 100);
                }
            }
            
            // H·ªÜ TH·ªêNG PH√ÅO HOA D√ÄY ƒê·∫∂C - ƒê√É S·ª¨A
            createFirework(x, y) {
                const colors = ['#ff0000', '#00ff00', '#ffff00', '#ff00ff', '#00ffff', '#ff9500', '#ff00ff', '#00ff00'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                this.fireworks.push({
                    x: x,
                    y: y,
                    particles: this.createParticles(x, y, color),
                    createdAt: Date.now(),
                    duration: 2000 // TƒÉng th·ªùi gian t·ªìn t·∫°i
                });
            }
            
            // T·∫°o nhi·ªÅu ph√°o hoa c√πng l√∫c
            createMultipleFireworks(count) {
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        this.createFirework(
                            Math.random() * this.canvas.width,
                            Math.random() * this.canvas.height / 1.5
                        );
                    }, i * 100);
                }
            }
            
            createParticles(x, y, color) {
                const particles = [];
                const count = 150; // TƒÉng s·ªë l∆∞·ª£ng h·∫°t
                
                for (let i = 0; i < count; i++) {
                    particles.push({
                        x: x,
                        y: y,
                        vx: (Math.random() - 0.5) * 12, // TƒÉng t·ªëc ƒë·ªô
                        vy: (Math.random() - 0.5) * 12,
                        radius: Math.random() * 4 + 1, // TƒÉng k√≠ch th∆∞·ªõc
                        color: color,
                        life: 1.0,
                        decay: 0.005 + Math.random() * 0.01, // Gi·∫£m t·ªëc ƒë·ªô m·ªù
                        gravity: 0.04
                    });
                }
                
                return particles;
            }
            
            // Ph√°o hoa n·ªÅn d√†y ƒë·∫∑c - ƒê√É S·ª¨A
            startIntensiveFireworks() {
                setInterval(() => {
                    // T·∫°o 1-3 ph√°o hoa m·ªói l·∫ßn
                    const count = 1 + Math.floor(Math.random() * 3);
                    for (let i = 0; i < count; i++) {
                        setTimeout(() => {
                            this.createFirework(
                                Math.random() * this.canvas.width,
                                Math.random() * this.canvas.height
                            );
                        }, i * 200);
                    }
                }, 500); // Gi·∫£m th·ªùi gian ch·ªù
            }
            
            // V√≤ng l·∫∑p animation cho ph√°o hoa
            animate() {
                // X√≥a canvas v·ªõi hi·ªáu ·ª©ng fade nh·∫π
                this.ctx.fillStyle = 'rgba(139, 0, 0, 0.05)'; // L√†m m·ªù √≠t h∆°n ƒë·ªÉ ph√°o hoa s√°ng h∆°n
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // C·∫≠p nh·∫≠t v√† v·∫Ω ph√°o hoa
                for (let i = this.fireworks.length - 1; i >= 0; i--) {
                    const firework = this.fireworks[i];
                    const age = Date.now() - firework.createdAt;
                    
                    if (age > firework.duration) {
                        this.fireworks.splice(i, 1);
                        continue;
                    }
                    
                    this.drawFirework(firework);
                }
                
                requestAnimationFrame(() => this.animate());
            }
            
            drawFirework(firework) {
                firework.particles.forEach(particle => {
                    // C·∫≠p nh·∫≠t v·ªã tr√≠
                    particle.x += particle.vx;
                    particle.y += particle.vy + particle.gravity;
                    particle.life -= particle.decay;
                    
                    if (particle.life > 0) {
                        // V·∫Ω particle ch√≠nh
                        this.ctx.beginPath();
                        this.ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                        this.ctx.fillStyle = `rgba(${this.hexToRgb(particle.color)}, ${particle.life})`;
                        this.ctx.fill();
                        
                        // Hi·ªáu ·ª©ng s√°ng xung quanh - TƒÉng k√≠ch th∆∞·ªõc
                        const gradient = this.ctx.createRadialGradient(
                            particle.x, particle.y, 0,
                            particle.x, particle.y, particle.radius * 4
                        );
                        gradient.addColorStop(0, `rgba(${this.hexToRgb(particle.color)}, ${particle.life * 0.5})`);
                        gradient.addColorStop(1, 'transparent');
                        
                        this.ctx.beginPath();
                        this.ctx.arc(particle.x, particle.y, particle.radius * 4, 0, Math.PI * 2);
                        this.ctx.fillStyle = gradient;
                        this.ctx.fill();
                    }
                });
            }
            
            // C√†i ƒë·∫∑t nh·∫°c T·∫øt
            setupMusic() {
                // T·ª± ƒë·ªông th·ª≠ ph√°t nh·∫°c
                const playMusic = () => {
                    this.tetMusic.volume = 0.6;
                    this.tetMusic.play().catch(e => {
                        console.log("ƒêang ch·ªù t∆∞∆°ng t√°c ƒë·ªÉ ph√°t nh·∫°c...");
                    });
                };
                
                // Th·ª≠ ph√°t ngay
                playMusic();
                
                // Ph√°t khi c√≥ t∆∞∆°ng t√°c ƒë·∫ßu ti√™n
                document.addEventListener('click', () => {
                    playMusic();
                }, { once: true });
                
                // N√∫t ƒëi·ªÅu khi·ªÉn √¢m nh·∫°c
                this.musicToggle.addEventListener('click', () => {
                    if (this.tetMusic.paused) {
                        this.tetMusic.play();
                        this.musicToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
                    } else {
                        this.tetMusic.pause();
                        this.musicToggle.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    }
                });
            }
            
            // Hi·ªÉn th·ªã m√†n h√¨nh k·∫øt th√∫c
            showFinalCelebration() {
                // Ph√°o hoa r·ª±c r·ª°
                for (let i = 0; i < 60; i++) {
                    setTimeout(() => {
                        this.createFirework(
                            Math.random() * this.canvas.width,
                            Math.random() * this.canvas.height
                        );
                    }, i * 50);
                }
                
                // V·∫≠t ph·∫©m r∆°i d√†y ƒë·∫∑c
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        this.createFallingItem();
                    }, i * 100);
                }
                
                // Hi·ªÉn th·ªã th√¥ng b√°o
                setTimeout(() => {
                    alert(`üéä CH√öC M·ª™NG NƒÇM M·ªöI 2026 üéä\n\nT·ªïng s·ªë ti·ªÅn l√¨ x√¨: ${this.formatMoneySimple(this.totalMoney)} VND\n\nCh√∫c b·∫°n m·ªôt nƒÉm m·ªõi An Khang Th·ªãnh V∆∞·ª£ng, V·∫°n S·ª± Nh∆∞ √ù!`);
                }, 3000);
            }
            
            // Chuy·ªÉn hex sang rgb
            hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? 
                    `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : 
                    '255, 255, 255';
            }
            
            // ƒê·ªãnh d·∫°ng ti·ªÅn HI·ªÇN TH·ªä TR√äN TH·∫∫
            formatMoney(amount) {
                return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
            }
            
            // ƒê·ªãnh d·∫°ng ti·ªÅn ƒë∆°n gi·∫£n cho t·ªïng ti·ªÅn
            formatMoneySimple(amount) {
                return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
            }
        }
        
        // Kh·ªüi ch·∫°y ·ª©ng d·ª•ng
        document.addEventListener('DOMContentLoaded', () => {
            const app = new Tet2026App();
            window.tetApp = app;
        });
    </script>
</body>
</html>
